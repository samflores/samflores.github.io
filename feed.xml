<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Sparse Thoughts</title>
        <description>Alguns pensamentos dispersos sobre Clojure, Ruby, Rust, Java, JavaScript e programa√ß√£o em geral.
</description>
        <link>http://blog.samflor.es/</link>
        <atom:link href="http://blog.samflor.es/feed.xml" rel="self" type="application/rss+xml"/>
        <pubDate>Tue, 08 Sep 2015 10:48:32 -0300</pubDate>
        <lastBuildDate>Tue, 08 Sep 2015 10:48:32 -0300</lastBuildDate>
        <generator>Jekyll v2.4.0</generator>
        
        <item>
            <title>Come√ßando com Clojure</title>
            <description>&lt;p&gt;H√° mais ou menos dois anos eu resolvi me aprofundar no estudo de &lt;em&gt;linguagens de
programa√ß√£o funcionais&lt;/em&gt;. Entre as candidatas estavam &lt;em&gt;Scala&lt;/em&gt;, &lt;em&gt;Erlang&lt;/em&gt;, &lt;em&gt;Haskel&lt;/em&gt;
e &lt;em&gt;Clojure&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Clojure estava em √∫ltimo lugar na minha lista de interesses devido √†
experi√™ncias anteriores n√£o muito agrad√°veis com outros &lt;em&gt;Lisps&lt;/em&gt;, mas depois de
ler uma cita√ß√£o do &lt;em&gt;Richard Stallman&lt;/em&gt; achei que deveria tentar de novo (n√£o que
eu costume concordar com ele, mas fiquei curioso):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The most powerful programming language is Lisp. If you don‚Äôt know Lisp (or its
variant, Scheme), you don‚Äôt know what it means for a programming language to
be powerful and elegant. Once you learn Lisp, you will understand what is
lacking in most other languages.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;o-que--clojure&quot;&gt;O que √© Clojure?&lt;/h2&gt;

&lt;p&gt;Clojure √© um &lt;em&gt;Lisp&lt;/em&gt; (eu sei que j√° deu pra entender isso) e compartilha
caracter√≠sticas comuns √† maioria deles, ou seja, Clojure √© uma linguagem:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;primariamente funcional;&lt;/li&gt;
  &lt;li&gt;din√¢mica;&lt;/li&gt;
  &lt;li&gt;fortemente tipada;&lt;/li&gt;
  &lt;li&gt;homoic√¥nica;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Al√©m de ter suas caracter√≠sticas pr√≥prias:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;roda na &lt;a href=&quot;http://en.wikipedia.org/wiki/Java_virtual_machine&quot;&gt;JVM&lt;/a&gt; &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;;&lt;/li&gt;
  &lt;li&gt;foco na imutabilidade;&lt;/li&gt;
  &lt;li&gt;primitivas de concorr√™ncia/paralelismo poderosas;&lt;/li&gt;
  &lt;li&gt;criada por &lt;a href=&quot;https://twitter.com/richhickey&quot;&gt;Rich Hickey&lt;/a&gt; (isso parece ser uma &lt;em&gt;feature&lt;/em&gt; tamb√©m).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Nossa, quanta coisa legal!  Mas o que significa isso tudo mesmo?&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Boa pergunta, curioso leitor. Pretendo respond√™-la neste e em outros posts
futuros, mas primeiro vamos ver com o que ela se parece.&lt;/p&gt;

&lt;h2 id=&quot;primeiro-contato&quot;&gt;Primeiro contato&lt;/h2&gt;

&lt;p&gt;N√£o poderia fazer um artigo introduzindo uma linguagem de programa√ß√£o sem o
cl√°ssico &lt;em&gt;hello world&lt;/em&gt;, certo? Pois aqui vai ele:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;println &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, world&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nada mal, hein?  &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;println&lt;/span&gt;&lt;/code&gt; √© uma fun√ß√£o que recebe como
par√¢metro a string &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello world&amp;quot;&lt;/span&gt;&lt;/code&gt;. Tirando o posicionamento
estranho dos par√™nteses, parece-se muito com a maioria das linguagens de script
por a√≠.&lt;/p&gt;

&lt;p&gt;E √© exatamente esta utiliza√ß√£o dos par√™nteses que reflete as origens da
linguagem. &lt;em&gt;Lisp&lt;/em&gt; vem de &lt;em&gt;&lt;strong&gt;LIS&lt;/strong&gt;t &lt;strong&gt;P&lt;/strong&gt;rocessing&lt;/em&gt;, ou Processamento de Listas.
Uma lista √© uma estrutura de dados similar aos conhecidos &lt;em&gt;Arrays&lt;/em&gt; de outras
linguagens.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// JavaScript&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;Dexter Morgan&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Hannibal Lecter&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Patrick Bateman&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Troque os colchetes por par√™nteses e remova as v√≠rgulas ‚Äî ou n√£o, v√≠rgulas
s√£o consideradas &lt;em&gt;whitespace&lt;/em&gt; em Clojure ‚Äî e voc√™ ter√° uma lista.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;c1&quot;&gt;;; Essas duas listas s√£o equivalentes&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Dexter Morgan&amp;quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Hannibal Lecter&amp;quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Patrick Bateman&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Dexter Morgan&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s&quot;&gt;&amp;quot;Hannibal Lecter&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s&quot;&gt;&amp;quot;Patrick Bateman&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; Os ap√≥strofos na frente das listas precisam estar l√°.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; Voc√™ entender√° o porqu√™.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; √Ä prop√≥sito, ; serve para iniciar um coment√°rio que se&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; estende at√© o fim da linha&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Mas espera a√≠? O exemplo do &lt;strong&gt;hello world&lt;/strong&gt; se parece muito com isso, n√£o √©?&lt;/em&gt;
Pergunta o intrigado leitor. Continue assim, leitor. Voc√™ est√° indo bem.&lt;/p&gt;

&lt;figure&gt;&lt;img src=&quot;/imgs/lists-everywhere.jpg&quot; alt=&quot;Listas. Listas por toda parte&quot; /&gt;&lt;figcaption&gt;Listas. Listas por toda parte&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;A√≠ est√° a beleza da coisa. Em Clojure (e em todo &lt;em&gt;Lisp&lt;/em&gt;) utilizamos listas para
escrever c√≥digo. O que acontece √© que ao avaliar uma lista o primeiro elemento
deve ser uma &lt;em&gt;fun√ß√£o&lt;/em&gt; (ou, como nesse caso, um nome associado a uma fun√ß√£o) e os
outros elementos ser√£o os argumentos dela. Essa √© a causa dos ap√≥strofos no
in√≠cio das listas de nomes acima. O primeiro elemento, uma &lt;em&gt;string&lt;/em&gt;, n√£o pode
ser executado como uma fun√ß√£o, ent√£o precisamos indicar que esta trata-se apenas
de uma lista de valores. Mais exemplos:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 42&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;- &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;; =&amp;gt; 5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;OK. Isso √© estranho!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Sim, √† primeira vista √© estranho mesmo, mas voc√™ se acostuma r√°pido. A sintaxe
dos &lt;em&gt;Lisps&lt;/em&gt; √© muito simples: todas as opera√ß√µes s√£o feitas utilizando-se fun√ß√µes
atrav√©s da avalia√ß√£o de listas&lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. No exemplo acima, o &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;+&lt;/span&gt;&lt;/code&gt;
e o &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt;&lt;/code&gt; n√£o s√£o operadores especiais com sintaxe especial,
como em outras linguagens. S√£o apenas fun√ß√µes inclu√≠das na biblioteca padr√£o da
linguagem inteligentemente nomeadas para, adivinhe, somar e subtrair,
respectivamente.&lt;/p&gt;

&lt;p&gt;Essa sintaxe √∫nica traz algumas vantagens al√©m da √≥bvia de ser f√°cil de
memorizar:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;√â poss√≠vel ter mais que 2 operandos em cada opera√ß√£o.&lt;/p&gt;

    &lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 15&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;;; o mesmo que 1 + 2 + 3 + 4 + 5 em outras linguagens&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;&amp;lt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;;; em outras linguagens: (x &amp;lt; y) and (y &amp;lt; z) and (z &amp;lt; w)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;N√£o √© preciso decorar tabelas de preced√™ncias, uma vez que todas as express√µes
s√£o bem delimitadas e sem riscos de ambiguidade.&lt;/p&gt;

    &lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot;&gt; &lt;span class=&quot;c1&quot;&gt;// JavaScript&lt;/span&gt;
 &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 30&lt;/span&gt;
 &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 30.&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;// talvez n√£o o que se espere lendo da esquerda pra direita&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 60.&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;// precisamos delimitar a soma pra que ela ocorra primeiro&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

    &lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt; &lt;span class=&quot;c1&quot;&gt;;; Clojure&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;* &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;; n√£o h√° como ser amb√≠guo aqui ...&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;* &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;; ... mesmo trocando a ordem dos par√¢metros&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Listas s√£o usadas para escrever o c√≥digo&lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; e, ao mesmo tempo, s√£o as estruturas
de dados utilizadas para representar o programa em tempo de execu√ß√£o. Este
paralelo entre sintaxe e a estrutura interna do programa, que chamamos de
&lt;strong&gt;homoiconicidade&lt;/strong&gt;, permite que c√≥digo seja criado e manipulado como &lt;em&gt;dados&lt;/em&gt;.
Linguagens homoic√¥nicas facilitam a metaprograma√ß√£o e reflex√£o (temas para um
outro &lt;em&gt;post&lt;/em&gt;).&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Nem tudo √© vantagem. Essa sintaxe, em alguns casos, tende a acumular par√™nteses
amontoados no final de grandes express√µes, embora existam formas de contornar
isso. Tamb√©m √© preciso um pouco de pr√°tica at√© se conseguir ler claramente o
c√≥digo escrito por outras pessoas (pelo menos foi o meu caso).&lt;/p&gt;

&lt;p&gt;Sem d√∫vidas, os par√™nteses s√£o os principais motivos de programadores
iniciantes (eu incluso) torcerem o nariz ao se deparar com &lt;em&gt;Lisp&lt;/em&gt;, mas n√£o tema.
Qualquer bom editor vai te ajudar com isso.&lt;/p&gt;

&lt;h2 id=&quot;read-eval-print-loop&quot;&gt;&lt;em&gt;read-eval-print loop&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;Antes de continuar a descrever a linguagem, deixa eu explicar como colocar as
m√£os no compilador e testar os c√≥digos voc√™ mesmo.&lt;/p&gt;

&lt;p&gt;Voc√™ pode obter a vers√£o est√°vel mais recente do compilador &lt;a href=&quot;http://repo1.maven.org/maven2/org/clojure/clojure/1.7.0/clojure-1.7.0.zip&quot;&gt;aqui&lt;/a&gt;.
Como eu disse, Clojure utiliza a &lt;em&gt;Java Virtual Machine&lt;/em&gt; para executar seus
programas. Este &lt;em&gt;zip&lt;/em&gt; cont√©m, entre outras coisas, o arquivo
&lt;code&gt;clojure-1.7.0.jar&lt;/code&gt;, que possui tudo o que √© necess√°rio para compilar, executar
e testar os seus programas (considerando que voc√™ j√° tem a JVM instalada, caso
contr√°rio, v√° &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;aqui&lt;/a&gt; primeiro).&lt;/p&gt;

&lt;p&gt;Para os n√£o-iniciados no universo &lt;em&gt;javistico&lt;/em&gt;, um &lt;em&gt;JAR&lt;/em&gt; √© um pacote pelo qual se
distribui um execut√°vel ou biblioteca. Algo parecido com as &lt;em&gt;gems&lt;/em&gt; do &lt;em&gt;Ruby&lt;/em&gt;,
&lt;em&gt;eggs&lt;/em&gt; do &lt;em&gt;Python&lt;/em&gt; ou os &lt;em&gt;crates&lt;/em&gt; do &lt;em&gt;Rust&lt;/em&gt;. Existem outras formas de obter e
gerenciar depend√™ncias Java/Clojure (&lt;em&gt;Maven&lt;/em&gt;, &lt;em&gt;Leiningem&lt;/em&gt;, &lt;em&gt;Boot&lt;/em&gt;, etc), mas por
enquanto s√≥ o download √© suficiente.&lt;/p&gt;

&lt;p&gt;Num terminal, execute o seguinte comando no mesmo diret√≥rio onde est√° o arquivo
&lt;code&gt;clojure-1.7.0.jar&lt;/code&gt; que voc√™ extraiu do &lt;em&gt;zip&lt;/em&gt; baixado:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;java -cp clojure-1.7.0.jar clojure.main&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;figure&gt;&lt;img src=&quot;/imgs/repl.png&quot; alt=&quot;Bem-vindo ao REPL&quot; /&gt;&lt;figcaption&gt;Bem-vindo ao REPL&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;O &lt;em&gt;prompt&lt;/em&gt; que aparece, aguardando que algo seja digitado, √© parte do &lt;strong&gt;REPL&lt;/strong&gt;,
ou &lt;em&gt;Read-Print-Eval Loop&lt;/em&gt;, uma ferramenta distribu√≠da junto com o compilador
que permite a execu√ß√£o interativa de c√≥digo. Ele &lt;em&gt;l√™&lt;/em&gt; o comando digitado,
&lt;em&gt;avalia&lt;/em&gt; e executa as express√µes, &lt;em&gt;imprime&lt;/em&gt; o resultado e &lt;em&gt;volta&lt;/em&gt; a esperar
outro comando. &lt;em&gt;REPLs&lt;/em&gt; n√£o s√£o exclusividades dos Lisps, mas costumam integrar
o &lt;em&gt;workflow&lt;/em&gt; dos programadores dessas linguagens mais que os outros. Vamos
tentar uma das express√µes que j√° mostrei: digite &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;
e tecle &lt;em&gt;enter&lt;/em&gt;.&lt;/p&gt;

&lt;figure&gt;&lt;img src=&quot;/imgs/repl-ex1.png&quot; alt=&quot;Exemplo 1: uma calculadora bem incomum&quot; /&gt;&lt;figcaption&gt;Exemplo 1: uma calculadora bem incomum&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Express√£o lida (&lt;em&gt;read&lt;/em&gt;), avaliada/executada (&lt;em&gt;eval&lt;/em&gt;), resultado impresso
(&lt;em&gt;print&lt;/em&gt;) e prompt esperando uma nova express√£o (&lt;em&gt;loop&lt;/em&gt;). Tente usar outras
fun√ß√µes matem√°ticas (&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;+&lt;/span&gt;&lt;/code&gt;, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;-&lt;/span&gt;&lt;/code&gt;,
&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;/&lt;/span&gt;&lt;/code&gt;, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;*&lt;/span&gt;&lt;/code&gt;), l√≥gicas
(&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/code&gt;, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;/code&gt;,
&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;/code&gt;), de entrada de dados (&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;read-line&lt;/span&gt;&lt;/code&gt;)
e de sa√≠da (&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;print&lt;/span&gt;&lt;/code&gt;, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;println&lt;/span&gt;&lt;/code&gt;). Para
interromper o REPL, pressione &lt;code&gt;Control+C&lt;/code&gt; ou &lt;code&gt;Control+D&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;formas-especiais&quot;&gt;Formas especiais&lt;/h2&gt;

&lt;p&gt;De volta ao conte√∫do principal. Agora que j√° entendemos a ideia de listas serem
avaliadas como chamadas de fun√ß√µes, podemos escrever qualquer tipo de programa
em Clojure, certo? Bem, nem tanto.&lt;/p&gt;

&lt;p&gt;Mais cedo do que voc√™ pensa seu programa precisar√° de mais poderes, como decidir
se precisa ou n√£o executar certa fun√ß√£o ou repetir uma execu√ß√£o v√°rias vezes.
Para tal, existem &lt;strong&gt;formas&lt;sup id=&quot;fnref:4&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; especiais&lt;/strong&gt; que alteram a maneira como
o compilador/interpretador avalia as express√µes lidas. N√£o irei descrever todas
aqui hoje (n√£o s√£o muitas), s√≥ o necess√°rio para come√ßar.&lt;/p&gt;

&lt;h3 id=&quot;if&quot;&gt;if&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;= &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Yea!&amp;quot;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Nay!&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; = √© a fun√ß√£o usada para comparar valores, equivalente ao&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; operador == da maioria das outras linguagens&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;O &lt;strong&gt;if&lt;/strong&gt; √© a forma usada para avalia√ß√£o condicional de express√µes. Ele tem a
mesma cara das outras fun√ß√µes mostradas at√© agora, n√©? Essa √© a ideia. √â uma
lista com 4 elementos, o que poder ser entendido como uma fun√ß√£o que recebe 3
argumentos. Por√©m, diferente de outras listas, nem todos os seus elementos
ser√£o avaliados.&lt;/p&gt;

&lt;p&gt;Se o resultado da avalia√ß√£o do primeiro argumento for &lt;em&gt;verdadeiro&lt;/em&gt;&lt;sup id=&quot;fnref:5&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; o valor
da forma como um todo ser√° o resultado da avalia√ß√£o do segundo argumento
e o terceiro argumento nunca ser√° avaliado. Se o primeiro argumento for algo que
indique falsidade ocorrer√° o inverso. O interpretador ir√° ignorar o segundo
argumento e avaliar o terceiro. Em Ruby seria algo assim:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&amp;quot;Yea!&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&amp;quot;Nay!&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;let&quot;&gt;let&lt;/h3&gt;

&lt;p&gt;A essa altura voc√™ j√° est√° se perguntando porque n√£o declarei nenhuma vari√°vel
nos exemplos mostrados. √â que tem uma pegadinha aqui. Em Clojure voc√™ n√£o
&lt;em&gt;atribui valores&lt;/em&gt; a vari√°veis como voc√™ pode estar acostumado. Voc√™ &lt;em&gt;associa um
valor&lt;/em&gt; a um nome. N√£o parece, mas tem uma diferen√ßa. Em &lt;em&gt;C&lt;/em&gt;, por exemplo, voc√™
pode atribuir novos valores a uma vari√°vel pr√©-existente:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-C&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;%p: %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9999&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;%p: %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// a sa√≠da seria algo como:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 0x7fff5717e648: 0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 0x7fff5717e648: 9999&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nesse exemplo d√° pra ver que a vari√°vel &lt;code class=&quot;highlight language-c&quot;&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;/code&gt; √© uma refer√™ncia
sempre √† posi√ß√£o da mem√≥ria &lt;code&gt;0x7fff5717e648&lt;/code&gt;, mesmo depois de mudarmos o valor.
Caso duas &lt;em&gt;threads&lt;/em&gt; estivessem lendo e/ou alterando essa vari√°vel
o comportamento seria imprevis√≠vel.&lt;/p&gt;

&lt;p&gt;Clojure evita esse problema impedindo ‚Äî ou pelo menos dificultando ‚Äî que voc√™
altere o valor de vari√°veis. Voc√™ cria associa√ß√µes, ou &lt;em&gt;bindings&lt;/em&gt;, entre nomes e
valores para um escopo. Isso √© feito usando a forma especial &lt;strong&gt;let&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;;; cada binding tem acesso aos bindings anteriores&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;println &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+ &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 60&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dois (ou mais) argumentos s√£o passados para o &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;let&lt;/span&gt;&lt;/code&gt;. Um
&lt;em&gt;vetor&lt;/em&gt;&lt;sup id=&quot;fnref:6&quot;&gt;&lt;a href=&quot;#fn:6&quot; class=&quot;footnote&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; de &lt;em&gt;bindings&lt;/em&gt;, composto de pares s√≠mbolo/valor, e um &lt;em&gt;corpo&lt;/em&gt;, que
√© o conjunto de express√µes que forma o escopo no qual os s√≠mbolos estar√£o
associados aos valores mencionados. O resultado da √∫ltima express√£o do corpo
ser√° o valor do &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;let&lt;/span&gt;&lt;/code&gt; como um todo.&lt;/p&gt;

&lt;h3 id=&quot;def&quot;&gt;def&lt;/h3&gt;

&lt;p&gt;Eu meio que &lt;em&gt;menti&lt;/em&gt; quando disse que a √∫nica forma de dar nomes √† valores
√© atrav√©s de &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;let&lt;/span&gt;&lt;/code&gt;. Voc√™ vai precisar dar nomes √† dados que
viver√£o por todo o tempo de execu√ß√£o de um programa e n√£o um pequeno escopo.
Imagine as fun√ß√µes que voc√™ define, por exemplo, ou valores que s√£o considerados
&lt;em&gt;constantes&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Para &lt;strong&gt;definir&lt;/strong&gt; esses nomes existe a forma especial &lt;strong&gt;def&lt;/strong&gt;. Nome bem √≥bvio,
n√©? Ela √© usada da seguinte maneira:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3.14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;;; um valor muito pouco preciso de ùõë&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; #&amp;#39;user/pi [I]&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;pi&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 3.14 [II]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;three-pi-over-two&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;/ &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;* &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; #&amp;#39;user/three-pi-over-two [III]&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;three-pi-over-two&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; 4.71 [IV]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sem mist√©rio. Uma lista de tr√™s elementos: o s√≠mbolo &lt;code&gt;def&lt;/code&gt;, um s√≠mbolo que
representa o nome da vari√°vel &lt;strong&gt;global&lt;/strong&gt; sendo criada e uma express√£o que ser√°
avaliada e o seu resultado atribu√≠do √† vari√°vel. Observe que o &lt;code&gt;def&lt;/code&gt; retorna
a vari√°vel em si (indicado pelos caracteres &lt;code&gt;#&#39;&lt;/code&gt;&lt;sup id=&quot;fnref:7&quot;&gt;&lt;a href=&quot;#fn:7&quot; class=&quot;footnote&quot;&gt;7&lt;/a&gt;&lt;/sup&gt; em &lt;code&gt;[I]&lt;/code&gt; e &lt;code&gt;[III]&lt;/code&gt;) e n√£o
o seu valor. Observe tamb√©m que os nomes das vari√°veis retornadas s√£o iniciados
por &lt;code&gt;user/&lt;/code&gt;. Esse √© o nome do &lt;strong&gt;namespace&lt;/strong&gt; no qual ela foi definida.
&lt;em&gt;Namespaces&lt;/em&gt; s√£o utilizados para agrupar fun√ß√µes relacionadas e evitar conflitos
de nomes de vari√°veis. Mais sobre &lt;em&gt;namespaces&lt;/em&gt; em outra oportunidade. &lt;/p&gt;

&lt;p&gt;Depois das defini√ß√µes, quaisquer utiliza√ß√µes dos s√≠mbolos usados resulta na
avalia√ß√£o do mesmo como o valor armazenado na vari√°vel correspondente, como pode
ser visto em &lt;code&gt;[II]&lt;/code&gt; e &lt;code&gt;[IV]&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;fn&quot;&gt;fn&lt;/h3&gt;

&lt;p&gt;Como n√£o poderia deixa de ser numa linguagem &lt;strong&gt;funcional&lt;/strong&gt;, √© preciso existir
uma forma de definir fun√ß√µes. Isso √© trabalho do &lt;strong&gt;fn&lt;/strong&gt; (Clojure tem uma
filosofia de que se uma fun√ß√£o ou macro ser√° muito utilizada ele deve ter um
nome bem curto, por isso, &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;fn&lt;/span&gt;&lt;/code&gt; e n√£o &lt;code&gt;function&lt;/code&gt;, por
exemplo).&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; #object[user$eval1$fn__2 0x465232e9 &amp;quot;user$eval1$fn__2@465232e9&amp;quot;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ao entrar a express√£o acima no REPL ele devolver√° algo bem estranho como
mostrado acima. N√£o se preocupe com isso. &lt;code&gt;fn&lt;/code&gt; retorna uma fun√ß√£o e o REPL tenta
imprimi-la. Essa √© a representa√ß√£o interna dela e n√£o √© muito √∫til para n√≥s.&lt;/p&gt;

&lt;p&gt;Nenhuma novidade na sintaxe. De novo temos uma lista, agora com 3 (ou mais)
elementos. O segundo √© um vetor de &lt;em&gt;bindings&lt;/em&gt;, semelhante ao do
&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;let&lt;/span&gt;&lt;/code&gt;, mas sem os valores. Esses valores s√≥ ser√£o informados
quando executarmos a fun√ß√£o. √Ä partir do terceiro elemento temos o corpo da
fun√ß√£o. Tamb√©m como no &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;let&lt;/span&gt;&lt;/code&gt;, o corpo comp√µe o escopo onde
os &lt;em&gt;bindings&lt;/em&gt; estar√£o acess√≠veis e o valor da avalia√ß√£o da √∫ltima express√£o do
corpo ser√° o valor de retorno da fun√ß√£o. No entanto, esse corpo n√£o √© executado
de imediado, apenas quando a fun√ß√£o for ‚Äúchamada‚Äù.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;S√≥ tem um problema, como eu chamo essa fun√ß√£o?&lt;/em&gt; Mais uma vez surpreende o
antenado leitor fazendo a pergunta certa.&lt;/p&gt;

&lt;p&gt;J√° sabemos que uma fun√ß√£o ser√° avaliada quando for o primeiro elemento de uma
lista, ent√£o podemos fazer isso:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Dexter&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &amp;quot;Hello, Dexter&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Jack&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &amp;quot;Hello, Jack&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Mas isso n√£o √© muito pr√°tico nem reus√°vel, afinal nas duas execu√ß√µes duas
c√≥pias distintas da fun√ß√£o s√£o criadas. Sem falar que seria loucura ficar
copiando fun√ß√µes de uma lado pro outro. Podemos fazer melhor. E se voc√™ est√°
mesmo acompanhando o post ‚Äî ou j√° programou em JavaScript&lt;sup id=&quot;fnref:8&quot;&gt;&lt;a href=&quot;#fn:8&quot; class=&quot;footnote&quot;&gt;8&lt;/a&gt;&lt;/sup&gt; ‚Äî sabe muito
bem o que fazer:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;greet&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; #&amp;#39;user/greet&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Dexter&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &amp;quot;Hello, Dexter&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Jack&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; &amp;quot;Hello, Jack&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Lembra da &lt;em&gt;homoiconicidade&lt;/em&gt;? C√≥digo √© dado, e como tal pode ser associado
a nomes como qualquer outro tipo. E a necessidade de se atribuir nomes a fun√ß√µes
√© t√£o comum que existe uma forma ainda mais pr√°tica de se fazer isso:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;defn &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;;; =&amp;gt; #&amp;#39;user/greet&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Compare com o exemplo anterior. A cria√ß√£o da fun√ß√£o, com
&lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;fn&lt;/span&gt;&lt;/code&gt;, e a atribui√ß√£o do nome, com &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;def&lt;/span&gt;&lt;/code&gt;,
podem ser reduzidas para apenas um passo com a macro &lt;code class=&quot;highlight language-clojure&quot;&gt;&lt;span class=&quot;nv&quot;&gt;defn&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;cenas-dos-prximos-captulos&quot;&gt;Cenas dos pr√≥ximos cap√≠tulos&lt;/h2&gt;

&lt;p&gt;Se voc√™ chegou at√© aqui, acredito que esteja realmente interessado em Clojure
e espero que minhas explica√ß√µes tenham sido claras o suficiente (se n√£o foram,
fique √† vontade para pedir esclarecimentos e deixar sugest√µes nos coment√°rios).&lt;/p&gt;

&lt;p&gt;Este &lt;em&gt;post&lt;/em&gt; n√£o chegou nem a arranhar a superf√≠cie da linguagem, por√©m j√° ficou
grande o bastante para darmos por encerrado o dia de trabalho. Mas n√£o sem antes
deixar registrado o que vem por ai (sem pretens√£o de fazer uma lista exaustiva
nem definir alguma ordem ou periodicidade):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;listas, vetores, conjuntos e mapas;&lt;/li&gt;
  &lt;li&gt;loops e recursividade;&lt;/li&gt;
  &lt;li&gt;organizando c√≥digo em &lt;em&gt;namespaces&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;fazendo as coisas do jeito funcional;&lt;/li&gt;
  &lt;li&gt;trabalhando com imutabilidade;&lt;/li&gt;
  &lt;li&gt;paralelismo e concorr√™ncia;&lt;/li&gt;
  &lt;li&gt;Clojure(Script) conversando com o mundo Java(Script);&lt;/li&gt;
  &lt;li&gt;macros: c√≥digo que manipula c√≥digo;&lt;/li&gt;
  &lt;li&gt;desenvolvimento web com Clojure;&lt;/li&gt;
  &lt;li&gt;ferramentas de &lt;em&gt;build&lt;/em&gt;: &lt;code&gt;leiningen&lt;/code&gt; e &lt;code&gt;boot&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;como escrever testes;&lt;/li&gt;
  &lt;li&gt;Single Page Applications com ClojureScript (e React?);&lt;/li&gt;
  &lt;li&gt;sua sugest√£o.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;At√© breve (espero).&lt;/p&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;Existem tamb√©m implementa√ß√µes que compilam para a &lt;a href=&quot;http://github.com/clojure/clojure-clr&quot;&gt;CLR&lt;/a&gt; e para &lt;a href=&quot;http://github.com/clojure/clojurescript&quot;&gt;JavaScript&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot;&gt;
      &lt;p&gt;Nem sempre o primeiro elemento √© uma fun√ß√£o. Existem tamb√©m &lt;em&gt;macros&lt;/em&gt; e &lt;em&gt;formas especiais&lt;/em&gt;, mas a sintaxe n√£o muda. Podemos generalizar e dizer que tudo s√£o fun√ß√µes. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot;&gt;
      &lt;p&gt;Tradicionalmente Lisps usam apenas listas para representar c√≥digo. Clojure usa outras estruturas, como &lt;em&gt;vetores&lt;/em&gt; e &lt;em&gt;mapas&lt;/em&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot;&gt;
      &lt;p&gt;Uma forma √© qualquer coisa que possa avaliada. Existe uma s√∫til diferen√ßa entre &lt;em&gt;formas&lt;/em&gt; e &lt;em&gt;express√µes&lt;/em&gt;, mas para todos os efeitos podemos usas as duas palavras indistintamente. &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:5&quot;&gt;
      &lt;p&gt;Quaisquer valores diferentes de &lt;code&gt;nil&lt;/code&gt; e &lt;code&gt;false&lt;/code&gt; ser√£o considerados verdadeiros numa avalia√ß√£o l√≥gica. √â o comportamento j√° conhecido por programadores Ruby. Em C &lt;code&gt;0&lt;/code&gt; √© considerado falso, em Clojure n√£o. Assim como listas vazias &lt;code&gt;&#39;()&lt;/code&gt;, que tamb√©m indicam falsidade em outros Lisps e indicam verdade em Clojure. &lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:6&quot;&gt;
      &lt;p&gt;Mais sobre vetores em outra oportunidade. Por enquanto basta saber que s√£o como listas, mas tem colchetes &lt;code&gt;[]&lt;/code&gt;, no lugar dos par√™nteses &lt;code&gt;()&lt;/code&gt;. &lt;a href=&quot;#fnref:6&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:7&quot;&gt;
      &lt;p&gt;&lt;code&gt;#&#39;&lt;/code&gt; √© um exemplo de uma &lt;em&gt;macro de leitura&lt;/em&gt;. Simplesmente uma forma mais sucinta de executar alguma fun√ß√£o. Nesse caso &lt;code&gt;#&#39;user/pi&lt;/code&gt; equivale a &lt;code&gt;(var user/pi)&lt;/code&gt;. Existem v√°rias outras macros de leitura, que devem ser exploradas em &lt;em&gt;posts&lt;/em&gt; mais apropriados. &lt;a href=&quot;#fnref:7&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:8&quot;&gt;
      &lt;p&gt;√â muito comum em JavaScript associarmos fun√ß√µes sem nome a vari√°veis: &lt;code class=&quot;highlight language-javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Hello, &amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt; &lt;a href=&quot;#fnref:8&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
            <pubDate>Mon, 07 Sep 2015 21:50:00 -0300</pubDate>
            <link>http://blog.samflor.es/comecando-com-clojure</link>
            <guid isPermaLink="true">http://blog.samflor.es/comecando-com-clojure</guid>
            
            
            <category>clojure</category>
            
        </item>
        
    </channel>
</rss>
